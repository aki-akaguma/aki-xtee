### `aki-xtee` Development Tasks

This document lists the development tasks based on the design document. Implemented features are marked as `[x]`.

#### **Phase 1: Core Functionality (Implemented)**

*   **Project Setup**
    *   [x] Initialize Rust project with `main.rs` and `lib.rs`.
    *   [x] Define custom error types in `src/util/err.rs`.
*   **Command-Line Interface (`src/conf/`)**
    *   [x] Parse positional `<file>` arguments.
    *   [x] Implement `--help` and `-H` flags.
    *   [x] Implement `--version` and `-V` flags.
*   **Core I/O Logic (`src/run.rs`)**
    *   [x] Read data from standard input (`stdin`).
    *   [x] Write data to standard output (`stdout`).
    *   [x] Implement multiplexer to write input to multiple destinations simultaneously.
*   **Output Factory (`src/util/adapt_output.rs`)**
    *   [x] Implement a factory to create `Box<dyn Write>` objects based on file extensions.
*   **Compression Support (`src/util/compress/`)**
    *   [x] Implement writer for plain (uncompressed) files.
    *   [x] Implement writer for `gzip` (`.gz`) compressed files.
    *   [x] Implement writer for `xz` (`.xz`) compressed files.
    *   [x] Implement writer for `zstd` (`.zst`) compressed files.
    *   [x] Implement writer for `bzip2` (`.bz2`) compressed files.
    *   [x] Implement writer for `lz4` (`.lz4`) compressed files.

#### **Phase 2: New Features (Pending)**

*   **Command-Line Interface (`src/conf/`)**
    *   [ ] Implement `--append` or `-a` flag to append to files instead of overwriting.
    *   [ ] Implement `--pipe-out` or `-p` flag for writing to pipes.

#### **Phase 3: Testing & Quality Assurance (Ongoing)**

*   **Testing (`tests/`)**
    *   [x] Create basic integration tests for CLI functionality.
    *   [ ] Enhance integration tests to cover all compression formats and edge cases.
    *   [ ] Add unit tests for the `util::adapt_output` factory logic.
    *   [ ] Add unit tests for individual compression modules.
*   **Continuous Integration (`.github/workflows/`)**
    *   [x] Set up CI to run tests on Ubuntu.
    *   [x] Set up CI to run tests on macOS.
    *   [x] Set up CI to run tests on Windows.
